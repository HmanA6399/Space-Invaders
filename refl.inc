;  MVREFL - Moves the reflector after checking its position
MVREFL MACRO
        MOV REFCTR, REFSPEED
        CMP REFflag,0
        JE  MV_UP
        REFMVDOWN
        JMP REF_END_LB
MV_UP:  REFMVUP
REF_END_LB: NOP
ENDM

REFMVDOWN MACRO
    CMP REFfristY,84D
    JE INV_UP_DN
    MOVEDOWN REFfristY,REFLECTORlen,REFfristX,REFendX,BGCOLOR,REFLECTORCOLOR ;MOVE DOWN REFLECTOR "MOVEDOWN" IS A MACRO
    JMP DN_OUT_LB
INV_UP_DN: INVERTREF 
DN_OUT_LB: NOP
ENDM REFMVDOWN

REFMVUP MACRO
    CMP REFfristY,1
    JE INV_UP_LB
    MOVEUP REFfristY,REFLECTORlen,REFfristX,REFendX,BGCOLOR,REFLECTORCOLOR  ;MOVE UP REFLECTOR "MOVEDOWN" IS A MACRO
    JMP UP_OUT_LB
INV_UP_LB: INVERTREF 
UP_OUT_LB: NOP
ENDM REFMVUP

INVERTREF MACRO
    XOR byte ptr REFflag,00000001B
ENDM INVERTREF

